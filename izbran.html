<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Избранные треки</title>
  <style>
    body {
      margin: 0;
      background-color: #363E6B;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      display: flex;
      justify-content: center;
      padding: 40px 20px;
      min-height: 100vh;
      color: #fff;
      user-select: none;
    }

    #playlist-container {
      background: #fff;
      border-radius: 24px;
      padding: 30px 30px 40px;
      max-width: 620px;
      width: 100%;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
      display: flex;
      flex-direction: column;
      color: #363E6B;
      user-select: none;
      box-sizing: border-box;
    }

    #playlist-container h3 {
      margin: 0 0 24px 10px;
      font-weight: 700;
      font-size: 2rem;
      letter-spacing: 0.05em;
      color: #363E6B;
      text-shadow: none;
    }





    .tracks-container {
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}



    .small-button {
      align-self: flex-start;
      margin-bottom: 20px;
      background: #fff;
      color: #363E6B;
      border: 2.5px solid #363E6B;
      border-radius: 16px;
      padding: 10px 24px;
      font-weight: 700;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 5px 18px rgba(54, 62, 107, 0.25);
      transition: box-shadow 0.3s ease, transform 0.2s ease, color 0.3s ease, border-color 0.3s ease;
      user-select: none;
    }

    .small-button:hover {
      box-shadow: 0 9px 28px rgba(54, 62, 107, 0.5);
      transform: translateY(-3px);
      color: #2a3150;
      border-color: #2a3150;
    }

    .small-button:active {
      transform: translateY(0);
      box-shadow: 0 5px 18px rgba(54, 62, 107, 0.25);
    }


    .small-button12 {
      align-self: flex-start;
      margin-bottom: 20px;
      background: #fff;
      color: #363E6B;
      border: 2.5px solid #363E6B;
      border-radius: 16px;
      padding: 10px 24px;
      font-weight: 700;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 5px 18px rgba(54, 62, 107, 0.25);
      transition: box-shadow 0.3s ease, transform 0.2s ease, color 0.3s ease, border-color 0.3s ease;
      user-select: none;
    }

    .small-button12:hover {
      box-shadow: 0 9px 28px rgba(54, 62, 107, 0.5);
      transform: translateY(-3px);
      color: #2a3150;
      border-color: #2a3150;
    }

    .small-button12:active {
      transform: translateY(0);
      box-shadow: 0 5px 18px rgba(54, 62, 107, 0.25);
    }

    #favorites-container {
      overflow-y: auto;
      max-height: 430px;
      padding-right: 6px;
      margin-bottom: 20px;
      user-select: none;
      display: flex;
      margin-top: 80px;
      flex-direction: column;
      gap: 12px;
    }

    #favorites-container::-webkit-scrollbar {
      width: 8px;
    }

    #favorites-container::-webkit-scrollbar-track {
      background: transparent;
    }

    #favorites-container::-webkit-scrollbar-thumb {
      background: #363E6B;
      border-radius: 8px;
    }

    #favorites-container > div {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    #albom-container {
      overflow-y: auto;
      max-height: 2000px;
      padding-right: 6px;
      margin-bottom: 10px;
      user-select: none;
      display: flex;
      flex-direction: column;
      gap: 7px;
    }

    #albom-container::-webkit-scrollbar {
      width: 14px;
    }

    .highlight {
    background-color: rgba(66, 153, 99, 0.7); 
    border-left: 5px solid #2d4e2d; 
    border-radius: 10px;
    transition: background-color 0.5s ease, transform 0.5s ease; 
    padding: 10px; 
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); 
}

    .track-button.highlight {
    background-color: rgba(66, 153, 99, 0.7); 
    border-left: 5px solid #2d4e2d; 
    border-radius: 10px;
    transition: background-color 0.5s ease, transform 0.5s ease; 
    padding: 10px; 
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); 
}

.fade-out {
    opacity: 0; 
    transform: scale(0.95); 
    transition: opacity 0.5s ease, transform 0.5s ease; 
}


    #albom-container::-webkit-scrollbar-track {
      background: transparent;
    }

    #albom-container::-webkit-scrollbar-thumb {
      background: #363E6B;
      border-radius: 8px;
    }

    #albom-container > div {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .track-button {
  background: #363E6B;
  border: none;
  border-radius: 16px;
  padding: 8px 18px;
  color: white;
  font-size: 16px;
  font-weight: 700;
  text-align: left;
  cursor: pointer;
  box-shadow: 0 5px 18px rgba(54, 62, 107, 0.7);
  transition: box-shadow 0.3s ease, transform 0.2s ease;
  user-select: none;
  min-width: 230px;
  max-width: 100%;
  white-space: nowrap; 
  overflow: hidden; 
  text-overflow: ellipsis; 
}

    .restore-button{
      background: #2c2c2c;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      font-size: 1.3rem;
      line-height: 1;
      color: rgb(255, 255, 255);
      font-weight: 700;
      cursor: pointer;

      position: absolute;
  right: 60px;
  bottom: 10px;
    }

    .restore-button0909{
      background: #7db14d;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      font-size: 1.3rem;
      line-height: 1;
      color: rgb(255, 255, 255);
      font-weight: 700;
      cursor: pointer;

      position: absolute;
  right: 60px;
  bottom: 10px;
    }


    .delete-button12 {
      background: #c25858;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      font-size: 1.3rem;
      line-height: 1;
      color: rgb(255, 255, 255);
      font-weight: 700;
      cursor: pointer;

      position: absolute;
  right: 20px;
  bottom: 10px;
    }

    .delete-button12:hover {
      transform: scale(1.1);
    }

    .delete-button12:active {
      transform: scale(0.95);
    }

    .track-button:hover:not(:disabled) {
      box-shadow: 0 9px 28px rgba(54, 62, 107, 1);
      transform: translateY(-3px);
    }

    .track-button:active:not(:disabled) {
      transform: translateY(0);
      box-shadow: 0 5px 18px rgba(54, 62, 107, 0.7);
    }

    .track-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      box-shadow: none;
      background: #ccc;
      color: #666;
    }

    .delete-button {
      flex-shrink: 0;
      background: #c25858;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1.3rem;
      line-height: 1;
      color: rgb(255, 255, 255);
      font-weight: 700;
      cursor: pointer;
      transition: box-shadow 0.3s ease, transform 0.2s ease;
      user-select: none;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .delete-button:hover {
      transform: scale(1.1);
    }

    .delete-button:active {
      transform: scale(0.95);
    }

    #audio-player {
      width: 100%;
      border-radius: 14px;
      box-shadow: 0 6px 20px rgba(54, 62, 107, 0.3);
      outline: none;
      background-color: #fff;
      height: 46px;
      user-select: none;
    }

    .album-title {
  position: relative;
  background-color: #6570af;
  padding: 17px 55px 17px 22px;
  cursor: pointer;
  display: flex;
  align-items: center;
  border-radius: 10px;
  margin-bottom: 10px;
  user-select: none;
  font-weight: 700;
  font-size: 1.1rem;
  color: white;
  transition: background-color 0.3s ease;
}





.num-btn-date {
      flex-shrink: 0;
      background: #363E6B;
      border: none;
      border-radius: 25%;
      width: 58px;
      height: 58px;
      font-size: 0.80rem;
      line-height: 1;
      color: white;
      font-weight: 1500;
      cursor: pointer;
      box-shadow: 0 5px 14px rgba(54, 62, 107, 0.7);
      transition: box-shadow 0.3s ease, transform 0.2s ease;
      user-select: none;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .num-btn-date:hover {
      box-shadow: 0 8px 22px rgba(54, 62, 107, 0.9);
      transform: scale(1.1);
    }

    .num-btn-date:active {
      transform: scale(0.95);
      box-shadow: 0 5px 14px rgba(54, 62, 107, 0.7);
    }

.album-title:hover {
  background-color: #4a5d9e;
}


.album-title .title-text {
  display: flex;
  align-items: center;
  flex-grow: 1;
  user-select: none;
}


.album-title .title-text::after {
  content: '▼';
  font-size: 0.8em;
  margin-left: 8px;
  color: white;
  transition: transform 0.3s ease;
  flex-shrink: 0;
  display: inline-block;
  transform-origin: center;
  transform: rotate(0deg);
}

.album-title[aria-expanded="true"] .title-text::after {
  transform: rotate(180deg);
}


.album-title .delete-button {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  width: 30px;
  height: 30px;
  border-radius: 50%;
  background: #ffffff;
  border: none;
  color: rgb(43, 43, 43);
  font-weight: 700;
  font-size: 1.3rem;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: box-shadow 0.3s ease, transform 0.2s ease;
  user-select: none;
  z-index: 2;
}

.album-title .delete-button:hover {
  transform: translateY(-50%) scale(1.1);
}

.album-title .delete-button:active {
  transform: translateY(-50%) scale(0.95);
}

.searchL {
  margin-bottom: 20px;
  width: 100%;
  display: flex;
  justify-content: center;
}

.searchL input[type="text"] {
  width: 100%;
  max-width: 600px;
  padding: 12px 16px;
  font-size: 1rem;
  border: 2.5px solid #6570af;
  border-radius: 16px;
  outline: none;
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: #363E6B;
  box-sizing: border-box;
}

.searchL input[type="text"]::placeholder {
  color: #999;
}

.searchL input[type="text"]:focus {
  border-color: #4a5d9e;
  box-shadow: 0 0 8px rgba(74, 93, 158, 0.6);
}

    @media (max-width: 640px) {
      #playlist-container {
        padding: 25px 20px 30px;
      }

      #playlist-container h3 {
        font-size: 1.6rem;
      }

      #favorites-container {
        max-height: 300px;
      }

      .track-button {
        font-size: 14px;
        padding: 4px 8px;
        min-width: 260px;
        max-width: 290px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        flex-shrink: 0;
        height: 55px;
      }

      .delete-button {
        width: 32px;
        height: 32px;
        font-size: 1.3rem;
      }

      #audio-player {
        height: 40px;
      }
    }
</style>
</head>

<body>
  <section id="playlist-container" aria-label="Плейлист избранных треков">
    <h3>Избранные треки</h3>
    <button class="small-button" onclick="location.href='index.html'" aria-label="Перейти в меню">Меню</button> 

    <form action="search" method="get" class="searchL">  
    <input type="text" name="query" placeholder="Поиск песен..."> 
    </form>  
      <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
      <button id="sort-button" class="small-button" aria-label="Сортировать по названию">А-Я</button>
      <button id="sort-button-data" class="small-button" aria-label="Сортировать по датам">Дата</button>
    </div>
    <div id="albom-container" tabindex="0" aria-live="polite" aria-relevant="additions"></div>
    <div id="favorites-container" tabindex="0" aria-live="polite" aria-relevant="additions"></div>
    <audio id="audio-player" controls preload="none" controlsList="nodownload" aria-label="Аудиоплеер для избранных треков"></audio>
  </section>

  <script>
    const albomsT = [
      {
      title: '1 ТГК МУЗ-ЧАТ',
      album: [
          { title: 'Городской маршрут', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/Русская%20душа%20-%20Городской%20маршрут.mp3' },
          { title: 'Неважно', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/tagmp3_2.-Русская-душа---Неважно.mp3' },
          { title: 'Здесь лапы у ели', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/tagmp3_3.-Русская-душа---Здесь-лапы-у-ели.mp3' },
          { title: 'Булгаков', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/tagmp3_4.-Русская-душа---Булгаков.mp3' },
          { title: 'В чем сила, брат', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/5.%20Русская%20душа%20-%20В%20чем%20сила,%20брат.mp3' },
          { title: 'Дерзкий вечер', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/tagmp3_6.-Русская-душа---Дерзкий-вечер.mp3' },
          { title: 'Пушкин', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/tagmp3_7.-Русская-душа---Пушкин.mp3' },
          { title: 'Санкции', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/tagmp3_8_Русская-душа_Новости_смотрю_и_плачу.mp3' },
          { title: 'Здесь лапы у ели', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/tagmp3_9.-Русская-душа---Здесь-лапы-у-ели.mp3' },
        ]
      },
      {
      title: '2 ТГК МУЗ-ЧАТ',
      album: [
        { title: 'Очень', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/2.%20Русская%20душа%20-%20Очень.wav--online-audio-convert.com%20(1).mp3' },
        { title: 'Воронье', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/воронье.mp3' },
        { title: 'Тишина', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/тишина.mp3' },
        { title: 'Туман', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/5.%20Русская%20душа%20-%20Туман.wav--online-audio-convert.com.mp3' },
        { title: 'Дети 20-го века', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/6.%20Русская%20душа%20-%20Дети%2020-го%20века.wav--online-audio-convert.com.mp3' },
        { title: 'Застава', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/7.%20Русская%20душа%20-%20Застава.wav--online-audio-convert.com.mp3' },
        { title: 'Великая держава', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/Русская душа - Великая держава.mp3' },
      ]
      },
      {
      title: '3 ТГК МУЗ-ЧАТ',
      album: [
        { title: 'Гафт', url: 'https://nextjs-boil-delta.vercel.app/гафт.mp3' },
        { title: 'Читаю строки ветхого завета', url: 'https://nextjs-boil-delta.vercel.app/Читаю-строки-ветхого-завета_.mp3' },
        { title: 'Женщина до утра', url: 'https://nextjs-boil-delta.vercel.app/женщина%20до%20утра.mp3' },
        { title: 'Одесса', url: 'https://nextjs-boil-delta.vercel.app/4.%20Русская%20душа%20-%20Одесса%20(1).mp3' },
        { title: 'Трепещет сердце от безумства', url: 'https://nextjs-boil-delta.vercel.app/5_Русская_душа_Трепещет_сердце_от_безумства.mp3' },
        { title: 'Мой город', url: 'https://nextjs-boil-delta.vercel.app/мой-город.mp3' },
        { title: 'За деньги', url: 'https://nextjs-boil-delta.vercel.app/за-деньги.mp3' },
        { title: 'Не стыдно', url: 'https://nextjs-boil-delta.vercel.app/Не-стыдно.mp3' },
      ]
      },
      {
      title: 'ГЕРОИ В МУЗЫКЕ',
      album: [
        { title: 'Блокада Ленинграда', url: 'https://nextjs-boil-delta.vercel.app/tagmp3_Блокада-Ленинграда-(2).mp3' },
        { title: 'Вагнера', url: 'https://nextjs-boil-delta.vercel.app/tagmp3_РД-Вагнера.mp3' },
        { title: 'Стрелок', url: 'https://nextjs-boil-delta.vercel.app/tagmp3_стрелок.mp3' },
        { title: 'Ну, здравствуй, мама!', url: 'https://nextjs-boil-delta.vercel.app/Ну,%20здравствуй,%20мама!.mp3' },
        { title: 'Мать', url: 'https://nextjs-boil-delta.vercel.app/tagmp3_Русская-душа---мать.mp3' },
        { title: 'Там, где маки лютуют', url: 'https://nextjs-boil-delta.vercel.app/Там, где маки лютуют.mp3' },
        { title: 'Как заставить молчать', url: 'https://nextjs-boil-delta.vercel.app/3_Русская_Душа_Как_заставить_молчать.mp3' },
        { title: 'Горит свеча', url: 'https://nextjs-boil-delta.vercel.app/tagmp3_Свеча-(2).mp3' },
      ]

      },
      {
        title: 'ЛИРИКА ДУШИ',
        album: [
          { title: 'Романс', url: 'https://nextjs-boil-delta.vercel.app/Русская%20душа%20-%20Романс%20.mp3' },
          { title: 'Венчание', url: 'https://nextjs-boil-delta.vercel.app/Венчание%20(4).mp3' },
          { title: 'Случайно встретились глазами', url: 'https://nextjs-boil-delta.vercel.app/tagmp3_Случайно-встретились-глазами.mp3' },
          { title: 'Люди бывают разными', url: 'https://nextjs-boil-delta.vercel.app/tagmp3_Русская-душа-–-Одни-и-те-же-имена.mp3' },
          { title: 'Брат', url: 'https://nextjs-boil-delta.vercel.app/tagmp3_Брат-версия.mp3' },
          { title: 'Недописанный стих', url: 'https://nextjs-boil-delta.vercel.app/tagmp3_Русская_душа_Недописанный_стих_.mp3' },
          { title: 'Испачканной карандашом', url: 'https://nextjs-boil-delta.vercel.app/tagmp3_Русская_душа_Испачканной_карандашом_.mp3' },
          { title: 'Одни и те же имена', url: 'https://nextjs-boil-delta.vercel.app/tagmp3_Русская-душа-–-Одни-и-те-же-имена.mp3' },
          { title: 'Пройдусь по парку', url: 'https://nextjs-boil-delta.vercel.app/tagmp3_Русская-душа---Пройдусь-по-парку.mp3' },
        ]
      },
      {
      title: 'ПОБЕДНЫЙ МАЙ',
      album: [
        { title: 'Слезы кончились', url: 'https://nextjs-boil-delta.vercel.app/Слезы%20кончились.mp3' },
        { title: 'Не прячь, слезу мой друг', url: 'https://nextjs-boil-delta.vercel.app/Не прячь, мой друг слезу.mp3' },
        { title: 'Там на обычном и завьюженном холме', url: 'https://nextjs-boil-delta.vercel.app/Там_на_обычном_и_завьюженном_холме.mp3' },
        { title: 'Вечная память героям', url: 'https://nextjs-boil-delta.vercel.app/Вечная%20память%20героям!%20(2).mp3' },
        { title: 'Вы слышите?', url: 'https://nextjs-boil-delta.vercel.app/cromulentarrangements461%20–%20Вы%20слышите_.mp3' },
        { title: 'Уже не стало ветеранов', url: 'https://nextjs-boil-delta.vercel.app/Уже%20не%20стало%20ветеранов.mp3' },
        { title: 'Мы часто о героях говорим', url: 'https://nextjs-boil-delta.vercel.app/Мы%20часто%20о%20героях%20говорим%20(2).mp3' },
        { title: 'Война дошла до Сталинграда', url: 'https://nextjs-boil-delta.vercel.app/Война%20дошла%20до%20Сталинграда%20(2).mp3' },
        { title: 'На выжженой земле', url: 'https://nextjs-boil-delta.vercel.app/На выжженной земле.mp3' },
        { title: 'Девятый десяток', url: 'https://nextjs-boil-delta.vercel.app/Девятый_десяток_для_вечности_миг_1.mp3' },        
      ]
      },
      {
      title: 'ШАНСОНЬЕ',
      album: [
        { title: 'Путник', url: 'https://nextjs-boil-delta.vercel.app/tagmp3_Русская-душа---Путник.mp3' },
      ]
      }  
      ];

   const tracks = [
    { date: '09.09.2014', titleNumber: '1', title: 'Богеме Ивлеевой', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская%20душа%20-%20Богеме%20Ивлеевой%20(5).mp3' },
    { date: '09.02.2025', titleNumber: '2', title: 'Я музыкант, я делаю рок', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская_душа_Я_музыкант,_я_делаю_рок,.mp3' },
    { date: '09.04.2024', titleNumber: '3', title: 'В голове с утра забота', url: 'https://nextjs-boilerplate-i6pd-fylb5ok5s-ds-projects-d772f088.vercel.app/В_голове_с_утра_забота__едит_повар_на_ра-_1_-_1_.mp3' },
    { date: '09.11.2004', titleNumber: '4', title: 'Есенин', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Кем_был_Есенин__мечтатель_иль_повеса__1.mp3' },
    { date: '09.01.2024', titleNumber: '5', title: 'Крестов молчания', url: 'https://nextjs-boilerplate-i6pd.vercel.app/tagmp3_Русская-душа---Крестов-молчания%20(1).mp3' },
    { date: '09.01.2024', titleNumber: '6', title: 'Богата русская природа', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская%20душа%20-%20Богата%20Русская%20природа.mp3' },
    { date: '09.01.2024', titleNumber: '7', title: 'Жизнь прекрасна', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Жизнь_прекрасна,_словно_светлый_день,_1.mp3' },
    { date: '09.01.2024', titleNumber: '8', title: 'Кружит снег', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Кружит%20снег.mp3' },
    { date: '09.01.2024', titleNumber: '9', title: 'Если б не пришла зима', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Если%20б%20не%20пришла%20зима.mp3' },
    { date: '09.01.2024', titleNumber: '10', title: 'На дворе снежинки кружат', url: 'https://nextjs-boilerplate-i6pd.vercel.app/На%20дворе%20снежинки%20кружат.mp3' },
    { date: '09.01.2024', titleNumber: '11', title: 'Новый год', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская%20душа%20Новый%20год.mp3' },
    { date: '09.01.2024', titleNumber: '12', title: 'Рождество', url: 'https://nextjs-boilerplate-i6pd.vercel.app/рождeство%20(1).mp3' },
    { date: '09.01.2024', titleNumber: '13', title: 'Дальнобой', url: 'https://nextjs-boilerplate-i6pd-git-main-ds-projects-d772f088.vercel.app/DALNOBOY_03-_1_-_1_.mp3' },
    { date: '09.01.2024', titleNumber: '14', title: 'Старый Новый Год', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская%20душа%20Старый%20новый%20год.mp3' },
    { date: '09.01.2024', titleNumber: '15', title: 'Крещение', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская%20душа%20-%20Крещение.mp3' },
    { date: '09.01.2024', titleNumber: '16', title: 'Выпускной', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Бау-Выпускной.mp3' },
    { date: '09.01.2024', titleNumber: '17', title: 'Высоцкий', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская%20душа%20-%20Высоцкий.mp3' },
    { date: '09.01.2024', titleNumber: '18', title: 'Венеры', url: 'https://nextjs-boilerplate-i6pd.vercel.app/венеры.mp3' },
    { date: '09.01.2024', titleNumber: '19', title: 'Женщинам', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская%20душа%20-%20Женщинам.MP3' },
    { date: '09.01.2024', titleNumber: '20', title: 'Слова', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская%20душа%20-%20Слова.mp3' },
    { date: '09.01.2024', titleNumber: '21', title: '1941-1945', url: 'https://nextjs-boilerplate-i6pd.vercel.app/1941-1945%20гг..MP3' },
    { date: '09.01.2024', titleNumber: '22', title: 'Семья', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Семья.mp3' },
    { date: '09.01.2024', titleNumber: '23', title: 'Пионеры', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Пионеры%20(1).mp3' },
    { date: '09.01.2024', titleNumber: '24', title: 'День библиотек', url: 'https://nextjs-boilerplate-i6pd.vercel.app/День%20библиотек.mp3' },
    { date: '09.01.2024', titleNumber: '25', title: 'Пограничники', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская%20душа%20-%20Пограничники.mp3' },
    { date: '09.01.2024', titleNumber: '26', title: 'Первое июня', url: 'https://nextjs-boilerplate-i6pd.vercel.app/1%20июня%20(1).mp3' },
    { date: '09.01.2024', titleNumber: '27', title: 'Русский язык', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Мой%20язык%20(2).mp3' },
    { date: '09.01.2024', titleNumber: '28', title: 'Троица', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Славься,%20Троица-Святая,%20(Remix).mp3' },
    { date: '09.01.2024', titleNumber: '29', title: 'День России', url: 'https://nextjs-boilerplate-i6pd-git-main-ds-projects-d772f088.vercel.app/День%20Рoссии%20готов%20.mp3' },
    { date: '09.01.2024', titleNumber: '30', title: 'Чёрная дата', url: 'https://nextjs-boilerplate-i6pd-git-main-ds-projects-d772f088.vercel.app/Черная%20дата%20(1).mp3' },
    { date: '09.01.2024', titleNumber: '31', title: 'Волны бьются о борт крутой', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Волны%20бьются%20о%20борт%20крутой.mp3' },
    { date: '09.01.2024', titleNumber: '32', title: 'Гимн славян', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская%20душа%20-%20Гимн%20славян%20.mp3' },
    { date: '09.01.2024', titleNumber: '33', title: 'День молодежи', url: 'https://nextjs-boilerplate-i6pd.vercel.app/День%20молодёжи.mp3' },
    { date: '09.01.2024', titleNumber: '34', title: 'Поэты', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Поэты%202.0%20(3).mp3' },
    { date: '09.01.2024', titleNumber: '35', title: 'Первое апреля', url: 'https://nextjs-boilerplate-i6pd.vercel.app/1%20апрелч%20.mp3' },
    { date: '09.01.2024', titleNumber: '36', title: 'Витязи', url: 'https://nextjs-boilerplate-i6pd.vercel.app/витя3и.mp3' },
    { date: '09.01.2024', titleNumber: '37', title: 'Юрий Гагарин', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Гагарин%20(1).mp3' },
    { date: '09.01.2024', titleNumber: '38', title: 'ПВО', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Наш%20мирный%20сон%20оберегают%20во́ины,.mp3' },
    { date: '09.01.2024', titleNumber: '39', title: 'Служителям искусства', url: 'https://nextjs-boilerplate-i6pd.vercel.app/служителям%20искусства.mp3' },
    { date: '09.01.2024', titleNumber: '40', title: 'Чистый четверг', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Чистый%20четверг.mp3' },
    { date: '09.01.2024', titleNumber: '41', title: 'Русская земля', url: 'https://nextjs-boilerplate-i6pd.vercel.app/русский.mp3' },
    { date: '09.01.2024', titleNumber: '42', title: 'Радоница', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская%20душа%20-%20Радоница.MP3.mp3' },
    { date: '09.01.2024', titleNumber: '43', title: 'Пожарным', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Не%20важно%20им,%20кто%20там%20попал%20в%20беду.mp3' },
    { date: '09.01.2024', titleNumber: '44', title: 'Первое мая', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская%20душа%20-%20Без%20труда%20ты%20земли%20не%20вскопаешь%20.mp3' },
    { date: '09.01.2024', titleNumber: '45', title: 'Красный крест', url: 'https://nextjs-boilerplate-i6pd.vercel.app/На%20поле%20боя,%20в%20вихре%20огня%20(1).mp3' },
    { date: '09.01.2024', titleNumber: '46', title: 'Ивана Купала', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская душа - Ивана Купала (1).mp3' },
    { date: '09.01.2024', titleNumber: '47', title: 'Ну, здравствуй, мама', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Ну, здравствуй, мама!.mp3' },
    { date: '09.01.2024', titleNumber: '48', title: 'Романс', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская душа - Романс .mp3' },
    { date: '09.01.2024', titleNumber: '49', title: 'Не оставляй меня весной', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская душа - Не оставляй меня весной .mp3' },
    { date: '09.01.2024', titleNumber: '50', title: 'Встало солнце на рассвете', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская душа - Встало солнце на рассвете.mp3' },
    { date: '09.01.2024', titleNumber: '51', title: 'Пасха', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская душа - Пасха.mp3' },
    { date: '09.01.2024', titleNumber: '52', title: 'Городской маршрут', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская душа - Городской маршрут.mp3' },
    { date: '09.01.2024', titleNumber: '53', title: 'Неважно', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/tagmp3_2.-Русская-душа---Неважно.mp3' },
    { date: '09.01.2024', titleNumber: '54', title: 'Здесь лапы у ели', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/tagmp3_3.-Русская-душа---Здесь-лапы-у-ели.mp3' },
    { date: '09.01.2024', titleNumber: '55', title: 'Булгаков', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/tagmp3_4.-Русская-душа---Булгаков.mp3' },
    { date: '09.01.2024', titleNumber: '56', title: 'В чем сила, брат', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/5.%20Русская%20душа%20-%20В%20чем%20сила,%20брат.mp3' },
    { date: '09.01.2024', titleNumber: '57', title: 'Дерзкий вечер', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/tagmp3_6.-Русская-душа---Дерзкий-вечер.mp3' },
    { date: '09.01.2024', titleNumber: '58', title: 'Пушкин', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/tagmp3_7.-Русская-душа---Пушкин.mp3' },
    { date: '09.01.2024', titleNumber: '59', title: 'Санкции', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/tagmp3_8_Русская-душа_Новости_смотрю_и_плачу.mp3' },
    { date: '09.01.2024', titleNumber: '60', title: 'Здесь лапы у ели', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/tagmp3_9.-Русская-душа---Здесь-лапы-у-ели.mp3' },
    { date: '09.01.2024', titleNumber: '61', title: 'Очень', url: 'https://nextjs-boilerplate-i6pd.vercel.app/2.%20Русская%20душа%20-%20Очень.wav--online-audio-convert.com%20(1).mp3' },
    { date: '09.01.2024', titleNumber: '62', title: 'Воронье', url: 'https://nextjs-boilerplate-i6pd.vercel.app/воронье.mp3' },
    { date: '09.01.2024', titleNumber: '63', title: 'Тишина', url: 'https://nextjs-boilerplate-i6pd.vercel.app/тишина.mp3' },
    { date: '09.01.2024', titleNumber: '64', title: 'Туман', url: 'https://nextjs-boilerplate-i6pd.vercel.app/5.%20Русская%20душа%20-%20Туман.wav--online-audio-convert.com.mp3' },
    { date: '09.01.2024', titleNumber: '65', title: 'Дети 20-го века', url: 'https://nextjs-boilerplate-i6pd.vercel.app/6.%20Русская%20душа%20-%20Дети%2020-го%20века.wav--online-audio-convert.com.mp3' },
    { date: '09.01.2024', titleNumber: '66', title: 'Застава', url: 'https://nextjs-boilerplate-i6pd.vercel.app/7.%20Русская%20душа%20-%20Застава.wav--online-audio-convert.com.mp3' },
    { date: '09.01.2024', titleNumber: '67', title: 'Гафт', url: 'https://nextjs-boil-delta.vercel.app/гафт.mp3' },
    { date: '09.01.2024', titleNumber: '68', title: 'Читаю строки ветхого завета', url: 'https://nextjs-boil-delta.vercel.app/Читаю-строки-ветхого-завета_.mp3' },
    { date: '09.01.2024', titleNumber: '69', title: 'Женщина до утра', url: 'https://nextjs-boil-delta.vercel.app/женщина%20до%20утра.mp3' },
    { date: '09.01.2024', titleNumber: '70', title: 'Одесса', url: 'https://nextjs-boil-delta.vercel.app/4.%20Русская%20душа%20-%20Одесса%20(1).mp3' },
    { date: '09.01.2024', titleNumber: '71', title: 'Трепещет сердце от безумства', url: 'https://nextjs-boil-delta.vercel.app/5_Русская_душа_Трепещет_сердце_от_безумства.mp3' },
    { date: '09.01.2024', titleNumber: '72', title: 'Мой город', url: 'https://nextjs-boilerplate-i6pd.vercel.app/мой-город.mp3' },
    { date: '09.01.2024', titleNumber: '73', title: 'За деньги', url: 'https://nextjs-boilerplate-i6pd.vercel.app/за-деньги.mp3' },
    { date: '09.01.2024', titleNumber: '74', title: 'Не стыдно', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Не-стыдно.mp3' },
    { date: '09.01.2024', titleNumber: '75', title: 'Блокада Ленинграда', url: 'https://nextjs-boilerplate-i6pd.vercel.app/tagmp3_Блокада-Ленинграда-(2).mp3' },
    { date: '09.01.2024', titleNumber: '76', title: 'Вагнера', url: 'https://nextjs-boilerplate-i6pd.vercel.app/tagmp3_РД-Вагнера.mp3' },
    { date: '09.01.2024', titleNumber: '77', title: 'Стрелок', url: 'https://nextjs-boilerplate-i6pd.vercel.app/tagmp3_стрелок.mp3' },
    { date: '09.01.2024', titleNumber: '78', title: 'Мать', url: 'https://nextjs-boilerplate-i6pd.vercel.app/tagmp3_Русская-душа---мать.mp3' },
    { date: '09.01.2024', titleNumber: '79', title: 'Как заставить молчать', url: 'https://nextjs-boilerplate-i6pd.vercel.app/3_Русская_Душа_Как_заставить_молчать.mp3' },
    { date: '09.01.2024', titleNumber: '80', title: 'Горит свеча', url: 'https://nextjs-boilerplate-i6pd.vercel.app/tagmp3_Свеча-(2).mp3' },
    { date: '09.01.2024', titleNumber: '81', title: 'Женщинам', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская%20душа%20-%20Женщинам%20(1).MP3' },
    { date: '09.01.2024', titleNumber: '82', title: 'Романс', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Русская%20душа%20-%20Романс%20.mp3' },
    { date: '09.01.2024', titleNumber: '83', title: 'Венчание', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Венчание%20(4).mp3' },
    { date: '09.01.2024', titleNumber: '84', title: 'Случайно встретились глазами', url: 'https://nextjs-boilerplate-i6pd.vercel.app/tagmp3_Случайно-встретились-глазами.mp3' },
    { date: '09.01.2024', titleNumber: '85', title: 'Люди бывают разными', url: 'https://nextjs-boilerplate-i6pd.vercel.app/tagmp3_Русская-душа-–-Одни-и-те-же-имена.mp3' },
    { date: '09.01.2024', titleNumber: '86', title: 'Брат', url: 'https://nextjs-boilerplate-i6pd.vercel.app/tagmp3_Брат-версия.mp3' },
    { date: '09.01.2024', titleNumber: '87', title: 'Путник', url: 'https://nextjs-boilerplate-i6pd.vercel.app/tagmp3_Русская-душа---Путник.mp3' },
    { date: '09.01.2024', titleNumber: '88', title: 'Недописанный стих', url: 'https://nextjs-boilerplate-i6pd.vercel.app/tagmp3_Русская_душа_Недописанный_стих_.mp3' },
    { date: '09.01.2024', titleNumber: '89', title: 'Испачканной карандашом', url: 'https://nextjs-boilerplate-i6pd.vercel.app/tagmp3_Русская_душа_Испачканной_карандашом_.mp3' },
    { date: '09.01.2024', titleNumber: '90', title: 'Одни и те же имена', url: 'https://nextjs-boilerplate-i6pd.vercel.app/tagmp3_Русская-душа-–-Одни-и-те-же-имена.mp3' },
    { date: '09.01.2024', titleNumber: '91', title: 'Пройдусь по парку', url: 'https://nextjs-boilerplate-i6pd.vercel.app/tagmp3_Русская-душа---Пройдусь-по-парку.mp3' },
    { date: '09.01.2024', titleNumber: '92', title: 'Слезы кончились', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Слезы%20кончились.mp3' },
    { date: '09.01.2024', titleNumber: '93', title: 'Не прячь, слезу мой друг', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Не прячь, мой друг слезу.mp3' },
    { date: '09.01.2024', titleNumber: '94', title: 'Там на обычном и завьюженном холме', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Там_на_обычном_и_завьюженном_холме.mp3' },
    { date: '09.01.2024', titleNumber: '95', title: 'Вечная память героям', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Вечная%20память%20героям!%20(2).mp3' },
    { date: '09.01.2024', titleNumber: '96', title: 'Вы слышите?', url: 'https://nextjs-boilerplate-i6pd.vercel.app/cromulentarrangements461%20–%20Вы%20слышите_.mp3' },
    { date: '09.01.2024', titleNumber: '97', title: 'Уже не стало ветеранов', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Уже%20не%20стало%20ветеранов.mp3' },
    { date: '09.01.2024', titleNumber: '98', title: 'Мы часто о героях говорим', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Мы%20часто%20о%20героях%20говорим%20(2).mp3' },
    { date: '09.01.2024', titleNumber: '99', title: 'Война дошла до Сталинграда', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Война%20дошла%20до%20Сталинграда%20(2).mp3' },
    { date: '09.01.2024', titleNumber: '100', title: 'На выжженой земле', url: 'https://nextjs-boilerplate-i6pd.vercel.app/На%20выжженной%20земле.mp3' },
    { date: '09.01.2024', titleNumber: '101', title: 'Девятый десяток', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Девятый_десяток_для_вечности_миг_1.mp3' },
    { date: '09.01.2024', titleNumber: '102', title: 'Там, где маки лютуют', url: 'https://nextjs-boilerplate-i6pd.vercel.app/Там,%20где%20маки%20лютуют.mp3' },
    { date: '09.01.2024', titleNumber: '103', title: 'Великая держава', url: 'https://nextjs-boilerplate-lemon-pi-53.vercel.app/Русская%20душа%20-%20Великая%20держава.mp3' },
    { date: '09.01.2024', titleNumber: '104', title: 'Уходят на войну', url: 'https://nextjs-boil-delta.vercel.app/Русская+душа+-+Уходят+на+войну++%281%29.mp3' },
];

const favoritesContainer = document.getElementById('favorites-container');
const albomContainer = document.getElementById('albom-container');
const audioPlayer = document.getElementById('audio-player');

function UpdateFunction() {
  favoritesContainer.innerHTML = '';
  albomContainer.innerHTML = '';

  const favoriteTitlesRaw = localStorage.getItem('trek') || '';
  const favoriteTitles = favoriteTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);

  const favoriteTracks = favoriteTitles
    .map(title => tracks.find(t => t.title === title))
    .filter(t => t && t.url);

  if (favoriteTracks.length === 0) {
    favoritesContainer.style.color = '#363E6B';
    favoritesContainer.style.padding = '10px';
    favoritesContainer.style.fontWeight = '600';
    favoritesContainer.style.userSelect = 'none';
  } else {
    favoriteTracks.forEach(track => {
      const trackContainer = document.createElement('div');
      trackContainer.style.display = 'flex';
      trackContainer.style.alignItems = 'center';
      trackContainer.style.justifyContent = 'space-between';

      const btn = document.createElement('button');
      btn.textContent = track.title;
      btn.className = 'track-button';
      btn.disabled = !track.url;
      btn.title = `Воспроизвести ${track.title}`;
      btn.setAttribute('aria-label', `Воспроизвести ${track.title}`);

      const deleteBtn = document.createElement('button');
      deleteBtn.textContent = '-';
      deleteBtn.className = 'delete-button';
      deleteBtn.setAttribute('aria-label', `Удалить ${track.title}`);

      deleteBtn.addEventListener('click', (event) => {
        event.stopPropagation();
        const rawFilter = favoriteTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
        const updatedFavorites = rawFilter.filter(fav => fav !== track.title);
        localStorage.setItem('trek', updatedFavorites.join('\n'));
        console.log(`Трек "${track.title}" удален из избранного.`); 
        UpdateFunction();
      });

      btn.addEventListener('click', () => {
        if (track.url) {
          audioPlayer.src = track.url;
          audioPlayer.play().catch(e => console.warn('Ошибка воспроизведения:', e));
        }
      });

      trackContainer.appendChild(deleteBtn);
      trackContainer.appendChild(btn);
      favoritesContainer.appendChild(trackContainer);
    });
  }

  const albomTitlesRaw = localStorage.getItem('trekA') || '';
  const AlbomTitles = albomTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);

  AlbomTitles.forEach(albom => {
    const albomMass = albomsT.find(a => a.title === albom);
    if (!albomMass) return;

    const albumDiv = document.createElement('div');
    albumDiv.style.marginBottom = '16px';
    albumDiv.style.display = 'flex';
    albumDiv.style.flexDirection = 'column';

    const titleText = document.createElement('span');
    titleText.className = 'title-text';
    titleText.textContent = albomMass.title;

    const deleteBtn2 = document.createElement('button');
    deleteBtn2.textContent = '-';
    deleteBtn2.className = 'delete-button';
    deleteBtn2.setAttribute('aria-label', `Удалить ${albomMass.title}`);

    deleteBtn2.addEventListener('click', () => {
      const rawFilter = albomTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
      const updatedFavorites = rawFilter.filter(fav => fav !== albomMass.title);
      localStorage.setItem('trekA', updatedFavorites.join('\n'));
      console.log(`Альбом "${albomMass.title}" удален из избранного.`); 
      UpdateFunction();
    });

    const albumButton = document.createElement('button');
    albumButton.className = 'album-title';
    albumButton.setAttribute('aria-expanded', 'false');
    albumButton.style.width = '100%';
    albumButton.style.textAlign = 'left';

    albumButton.appendChild(deleteBtn2);
    albumButton.appendChild(titleText);

    const tracksContainer = document.createElement('div');
    tracksContainer.className = 'tracks-container'; 
    tracksContainer.style.maxHeight = '0'; 
    tracksContainer.style.overflow = 'hidden';

    albomMass.album.forEach(vf => {
      const btnf = document.createElement('button');
      btnf.textContent = vf.title;
      btnf.className = 'track-button';
      btnf.title = `Воспроизвести ${vf.title}`;
      btnf.setAttribute('aria-label', `Воспроизвести ${vf.title}`);

      const disabledTitlesRaw = localStorage.getItem('disabled') || '';
      const disabledTitles = disabledTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
      console.log(disabledTitles)
      if (disabledTitles.map(title => title.toLowerCase()).includes(vf.title.toLowerCase()+"-")) {
        btnf.disabled = true;
        console.log("Сработало")

        const restoreBtn = document.createElement('button');
        restoreBtn.textContent = '+';
        restoreBtn.className = 'restore-button';
        restoreBtn.setAttribute('aria-label', `Восстановить ${vf.title}`);
        restoreBtn.disabled = false; 

        restoreBtn.addEventListener('click', (event) => {
            event.preventDefault();
            const disabledTitlesRaw09 = localStorage.getItem('disabled') || '';
      const disabledTitles09 = disabledTitlesRaw09.split('\n').map(s => s.trim()).filter(s => s.length > 0);
            const updatedDisabledTitles = disabledTitles09.filter(title => title.toLowerCase() !== vf.title.toLowerCase()+"-");
            localStorage.setItem('disabled', updatedDisabledTitles.join('\n'));
            btnf.disabled = false; 
            restoreBtn.remove(); 
            console.log(`Трек "${vf.title}" восстановлен.`); 
            const disabledTitlesRaw3 = localStorage.getItem('disabled') || '';
            const disabledTitles3 = disabledTitlesRaw3.split('\n').map(s => s.trim()).filter(s => s.length > 0);
            console.log(disabledTitles3); 
        });

        btnf.appendChild(restoreBtn);
      }

      btnf.addEventListener('click', () => {
        if (vf.url) {
          audioPlayer.src = vf.url;
          audioPlayer.play().catch(e => console.warn('Ошибка воспроизведения:', e));
        }
      });

      const deleteBtn22 = document.createElement('button');
      deleteBtn22.textContent = '-';
      deleteBtn22.className = 'delete-button12';
      deleteBtn22.setAttribute('aria-label', `Удалить ${albomMass.title}`);

      deleteBtn22.addEventListener('click', (event) => {
        event.stopPropagation(); 
        btnf.disabled = true;
        const btnfDisabled = btnf.textContent;
        const disabledTitlesRaw = localStorage.getItem('disabled') || '';
        const disabledTitles = disabledTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
        localStorage.setItem('disabled', btnfDisabled + '\n' + disabledTitles.join('\n'));
        console.log(`Трек "${btnfDisabled}" отключен.`); 



        const restoreBtn = document.createElement('button');
        restoreBtn.textContent = '+';
        restoreBtn.className = 'restore-button';
        restoreBtn.setAttribute('aria-label', `Восстановить ${vf.title}`);
        restoreBtn.disabled = false; 

        restoreBtn.addEventListener('click', () => {
          event.stopPropagation(); 
          const disabledTitlesRaw091 = localStorage.getItem('disabled') || '';
      const disabledTitles091 = disabledTitlesRaw091.split('\n').map(s => s.trim()).filter(s => s.length > 0);
            const updatedDisabledTitles1 = disabledTitles091.filter(title => title.toLowerCase() !== vf.title.toLowerCase()+"-");
            localStorage.setItem('disabled', updatedDisabledTitles1.join('\n'));
            btnf.disabled = false; 
            restoreBtn.remove(); 
            console.log(`Трек "${vf.title}" восстановлен.`); 
            const disabledTitlesRaw3 = localStorage.getItem('disabled') || '';
            const disabledTitles3 = disabledTitlesRaw3.split('\n').map(s => s.trim()).filter(s => s.length > 0);
            console.log(disabledTitles3); 
        });

        btnf.appendChild(restoreBtn);
        
        
      });
      btnf.appendChild(deleteBtn22);
      tracksContainer.appendChild(btnf);
   } 
);
  

    albumButton.addEventListener('click', () => {
      const isHidden = tracksContainer.style.maxHeight === '0px';
      tracksContainer.style.maxHeight = isHidden ? '600px' : '0px';
      tracksContainer.style.transition = 'max-height 0.3s ease';
      albumButton.setAttribute('aria-expanded', isHidden ? 'true' : 'false');
    });

    albumDiv.appendChild(albumButton);
    albumDiv.appendChild(tracksContainer);
    albomContainer.appendChild(albumDiv);
  });
}
















function ABCUpdateFunction() {
  favoritesContainer.innerHTML = '';
  albomContainer.innerHTML = '';

  const favoriteTitlesRaw = localStorage.getItem('trek') || '';
  const favoriteTitles = favoriteTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);

  const favoriteTracks = favoriteTitles
    .map(title => tracks.find(t => t.title === title))
    .filter(t => t && t.url);

  console.log(favoriteTracks)
  favoriteTracks.sort((a, b) => a.title.localeCompare(b.title));
  console.log(favoriteTracks)

  

  if (favoriteTracks.length === 0) {
    favoritesContainer.style.color = '#363E6B';
    favoritesContainer.style.padding = '10px';
    favoritesContainer.style.fontWeight = '600';
    favoritesContainer.style.userSelect = 'none';
  } else {
    favoriteTracks.forEach(track => {
      const trackContainer = document.createElement('div');
      trackContainer.style.display = 'flex';
      trackContainer.style.alignItems = 'center';
      trackContainer.style.justifyContent = 'space-between';

      const btn = document.createElement('button');
      btn.textContent = track.title;
      btn.className = 'track-button';
      btn.disabled = !track.url;
      btn.title = `Воспроизвести ${track.title}`;
      btn.setAttribute('aria-label', `Воспроизвести ${track.title}`);

      const deleteBtn = document.createElement('button');
      deleteBtn.textContent = '-';
      deleteBtn.className = 'delete-button';
      deleteBtn.setAttribute('aria-label', `Удалить ${track.title}`);

      deleteBtn.addEventListener('click', (event) => {
        event.stopPropagation();
        const rawFilter = favoriteTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
        const updatedFavorites = rawFilter.filter(fav => fav !== track.title);
        localStorage.setItem('trek', updatedFavorites.join('\n'));
        console.log(`Трек "${track.title}" удален из избранного.`); 
        ABCUpdateFunction();
      });

      btn.addEventListener('click', () => {
        if (track.url) {
          audioPlayer.src = track.url;
          audioPlayer.play().catch(e => console.warn('Ошибка воспроизведения:', e));
        }
      });

      trackContainer.appendChild(deleteBtn);
      trackContainer.appendChild(btn);
      favoritesContainer.appendChild(trackContainer);
    });
  }

  const albomTitlesRaw = localStorage.getItem('trekA') || '';
  const AlbomTitles = albomTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
  get = []
  AlbomTitles.forEach(trackBearReat => {
    const derA = albomsT.find(a => a.title === trackBearReat);
    get.push(derA)
  })
  const getUpdate = get.sort((a, b) => a.title.localeCompare(b.title))
  console.log(getUpdate)
  console.log('стоп')

  

  

  AlbomTitles.forEach(albom => {
    const albomMass = getUpdate.album.sort((a, b) => a.title.localeCompare(b.title))
    console.log(albomMass)


    if (!albomMass) return;

    const albumDiv = document.createElement('div');
    albumDiv.style.marginBottom = '16px';
    albumDiv.style.display = 'flex';
    albumDiv.style.flexDirection = 'column';

    const titleText = document.createElement('span');
    titleText.className = 'title-text';
    titleText.textContent = getUpdate.title;

    const deleteBtn2 = document.createElement('button');
    deleteBtn2.textContent = '-';
    deleteBtn2.className = 'delete-button';
    deleteBtn2.setAttribute('aria-label', `Удалить ${albomMass.title}`);

    deleteBtn2.addEventListener('click', () => {
      const rawFilter = albomTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
      const updatedFavorites = rawFilter.filter(fav => fav !== getUpdate.title);
      localStorage.setItem('trekA', updatedFavorites.join('\n'));
      console.log(`Альбом "${der.title}" удален из избранного.`); 
      ABCUpdateFunction();
    });

    const albumButton = document.createElement('button');
    albumButton.className = 'album-title';
    albumButton.setAttribute('aria-expanded', 'false');
    albumButton.style.width = '100%';
    albumButton.style.textAlign = 'left';

    albumButton.appendChild(deleteBtn2);
    albumButton.appendChild(titleText);

    const tracksContainer = document.createElement('div');
    tracksContainer.className = 'tracks-container'; 
    tracksContainer.style.maxHeight = '0'; 
    tracksContainer.style.overflow = 'hidden';

    albomMass.forEach(vf => {
      const btnf = document.createElement('button');
      btnf.textContent = vf.title;
      btnf.className = 'track-button';
      btnf.title = `Воспроизвести ${vf.title}`;
      btnf.setAttribute('aria-label', `Воспроизвести ${vf.title}`);

      const disabledTitlesRaw = localStorage.getItem('disabled') || '';
      const disabledTitles = disabledTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
      console.log(disabledTitles)
      if (disabledTitles.map(title => title.toLowerCase()).includes(vf.title.toLowerCase()+"-")) {
        btnf.disabled = true;
        console.log("Сработало")

        const restoreBtn = document.createElement('button');
        restoreBtn.textContent = '+';
        restoreBtn.className = 'restore-button';
        restoreBtn.setAttribute('aria-label', `Восстановить ${vf.title}`);
        restoreBtn.disabled = false; 

        restoreBtn.addEventListener('click', (event) => {
            event.preventDefault();
            const disabledTitlesRaw09 = localStorage.getItem('disabled') || '';
      const disabledTitles09 = disabledTitlesRaw09.split('\n').map(s => s.trim()).filter(s => s.length > 0);
            const updatedDisabledTitles = disabledTitles09.filter(title => title.toLowerCase() !== vf.title.toLowerCase()+"-");
            localStorage.setItem('disabled', updatedDisabledTitles.join('\n'));
            btnf.disabled = false; 
            restoreBtn.remove(); 
            console.log(`Трек "${vf.title}" восстановлен.`); 
            const disabledTitlesRaw3 = localStorage.getItem('disabled') || '';
            const disabledTitles3 = disabledTitlesRaw3.split('\n').map(s => s.trim()).filter(s => s.length > 0);
            console.log(disabledTitles3); 
        });

        btnf.appendChild(restoreBtn);
      }

      btnf.addEventListener('click', () => {
        if (vf.url) {
          audioPlayer.src = vf.url;
          audioPlayer.play().catch(e => console.warn('Ошибка воспроизведения:', e));
        }
      });

      const deleteBtn22 = document.createElement('button');
      deleteBtn22.textContent = '-';
      deleteBtn22.className = 'delete-button12';
      deleteBtn22.setAttribute('aria-label', `Удалить ${albomMass.title}`);

      deleteBtn22.addEventListener('click', (event) => {
        event.stopPropagation(); 
        btnf.disabled = true;
        const btnfDisabled = btnf.textContent;
        const disabledTitlesRaw = localStorage.getItem('disabled') || '';
        const disabledTitles = disabledTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
        localStorage.setItem('disabled', btnfDisabled + '\n' + disabledTitles.join('\n'));
        console.log(`Трек "${btnfDisabled}" отключен.`); 



        const restoreBtn = document.createElement('button');
        restoreBtn.textContent = '+';
        restoreBtn.className = 'restore-button';
        restoreBtn.setAttribute('aria-label', `Восстановить ${vf.title}`);
        restoreBtn.disabled = false; 

        restoreBtn.addEventListener('click', () => {
          event.stopPropagation(); 
          const disabledTitlesRaw091 = localStorage.getItem('disabled') || '';
      const disabledTitles091 = disabledTitlesRaw091.split('\n').map(s => s.trim()).filter(s => s.length > 0);
            const updatedDisabledTitles1 = disabledTitles091.filter(title => title.toLowerCase() !== vf.title.toLowerCase()+"-");
            localStorage.setItem('disabled', updatedDisabledTitles1.join('\n'));
            btnf.disabled = false; 
            restoreBtn.remove(); 
            console.log(`Трек "${vf.title}" восстановлен.`); 
            const disabledTitlesRaw3 = localStorage.getItem('disabled') || '';
            const disabledTitles3 = disabledTitlesRaw3.split('\n').map(s => s.trim()).filter(s => s.length > 0);
            console.log(disabledTitles3); 
        });

        btnf.appendChild(restoreBtn);
        
        
      });
      btnf.appendChild(deleteBtn22);
      tracksContainer.appendChild(btnf);
   } 
);
  

    albumButton.addEventListener('click', () => {
      const isHidden = tracksContainer.style.maxHeight === '0px';
      tracksContainer.style.maxHeight = isHidden ? '600px' : '0px';
      tracksContainer.style.transition = 'max-height 0.3s ease';
      albumButton.setAttribute('aria-expanded', isHidden ? 'true' : 'false');
    });

    albumDiv.appendChild(albumButton);
    albumDiv.appendChild(tracksContainer);
    albomContainer.appendChild(albumDiv);
  });
}
























































function DateUpdateFunction() {
  favoritesContainer.innerHTML = '';
  albomContainer.innerHTML = '';

  const favoriteTitlesRaw = localStorage.getItem('trek') || '';
  const favoriteTitles = favoriteTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);

  const favoriteTracks = favoriteTitles
    .map(title => tracks.find(t => t.title === title))
    .filter(t => t && t.url);

  favoriteTracks.sort((a, b) => new Date(b.date) - new Date(a.date));
  console.log(favoriteTracks)

  if (favoriteTracks.length === 0) {
    favoritesContainer.style.color = '#363E6B';
    favoritesContainer.style.padding = '10px';
    favoritesContainer.style.fontWeight = '600';
    favoritesContainer.style.userSelect = 'none';
  } else {
    favoriteTracks.forEach(track => {
      const trackContainer = document.createElement('div');
      trackContainer.style.display = 'flex';
      trackContainer.style.alignItems = 'center';
      trackContainer.style.justifyContent = 'space-between';

      const btn = document.createElement('button');
      btn.textContent = track.title;
      btn.className = 'track-button';
      btn.disabled = !track.url;
      btn.title = `Воспроизвести ${track.title}`;
      btn.setAttribute('aria-label', `Воспроизвести ${track.title}`);

      monthDay = {
        '01': 'янв',
        '02': 'фев',
        '03': 'мар',
        '04': 'апр',
        '05': 'май',
        '06': 'июн',
        '07': 'июл',
        '08': 'авг',
        '09': 'сен',
        '10': 'окт',
        '11': 'нояб',
        '12': 'дек',


      }

      const numBtnDate = document.createElement('button');
      numBtnDate.className = 'num-btn-date';
      const trackDate = track.date.substring(3, 5)
      numBtnDate.textContent = track.date.substring(0, 2) + ' ' + monthDay[trackDate] + "\n" + track.date.substring(6, 10);

      const deleteBtn = document.createElement('button');
      deleteBtn.textContent = '-';
      deleteBtn.className = 'delete-button';
      deleteBtn.setAttribute('aria-label', `Удалить ${track.title}`);

      deleteBtn.addEventListener('click', (event) => {
        event.stopPropagation();
        const rawFilter = favoriteTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
        const updatedFavorites = rawFilter.filter(fav => fav !== track.title);
        localStorage.setItem('trek', updatedFavorites.join('\n'));
        console.log(`Трек "${track.title}" удален из избранного.`); 
        DateUpdateFunction();
      });

      btn.addEventListener('click', () => {
        if (track.url) {
          audioPlayer.src = track.url;
          audioPlayer.play().catch(e => console.warn('Ошибка воспроизведения:', e));
        }
      });

      trackContainer.appendChild(numBtnDate)
      trackContainer.appendChild(deleteBtn);
      trackContainer.appendChild(btn);
      favoritesContainer.appendChild(trackContainer);
    });
  }

  const albomTitlesRaw = localStorage.getItem('trekA') || '';
  const AlbomTitles = albomTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);

  AlbomTitles.forEach(albom => {
    const albomMass = albomsT.find(a => a.title === albom);
    if (!albomMass) return;

    const albumDiv = document.createElement('div');
    albumDiv.style.marginBottom = '16px';
    albumDiv.style.display = 'flex';
    albumDiv.style.flexDirection = 'column';

    const titleText = document.createElement('span');
    titleText.className = 'title-text';
    titleText.textContent = albomMass.title;

    const deleteBtn2 = document.createElement('button');
    deleteBtn2.textContent = '-';
    deleteBtn2.className = 'delete-button';
    deleteBtn2.setAttribute('aria-label', `Удалить ${albomMass.title}`);

    deleteBtn2.addEventListener('click', () => {
      const rawFilter = albomTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
      const updatedFavorites = rawFilter.filter(fav => fav !== albomMass.title);
      localStorage.setItem('trekA', updatedFavorites.join('\n'));
      console.log(`Альбом "${albomMass.title}" удален из избранного.`); 
      UpdateFunction();
    });

    const albumButton = document.createElement('button');
    albumButton.className = 'album-title';
    albumButton.setAttribute('aria-expanded', 'false');
    albumButton.style.width = '100%';
    albumButton.style.textAlign = 'left';

    albumButton.appendChild(deleteBtn2);
    albumButton.appendChild(titleText);

    const tracksContainer = document.createElement('div');
    tracksContainer.className = 'tracks-container'; 
    tracksContainer.style.maxHeight = '0'; 
    tracksContainer.style.overflow = 'hidden';

    albomMass.album.forEach(vf => {
      const btnf = document.createElement('button');
      btnf.textContent = vf.title;
      btnf.className = 'track-button';
      btnf.title = `Воспроизвести ${vf.title}`;
      btnf.setAttribute('aria-label', `Воспроизвести ${vf.title}`);

      const disabledTitlesRaw = localStorage.getItem('disabled') || '';
      const disabledTitles = disabledTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
      console.log(disabledTitles)
      if (disabledTitles.map(title => title.toLowerCase()).includes(vf.title.toLowerCase()+"-")) {
        btnf.disabled = true;
        console.log("Сработало")

        const restoreBtn = document.createElement('button');
        restoreBtn.textContent = '+';
        restoreBtn.className = 'restore-button';
        restoreBtn.setAttribute('aria-label', `Восстановить ${vf.title}`);
        restoreBtn.disabled = false; 

        restoreBtn.addEventListener('click', (event) => {
            event.preventDefault();
            const disabledTitlesRaw09 = localStorage.getItem('disabled') || '';
      const disabledTitles09 = disabledTitlesRaw09.split('\n').map(s => s.trim()).filter(s => s.length > 0);
            const updatedDisabledTitles = disabledTitles09.filter(title => title.toLowerCase() !== vf.title.toLowerCase()+"-");
            localStorage.setItem('disabled', updatedDisabledTitles.join('\n'));
            btnf.disabled = false; 
            restoreBtn.remove(); 
            console.log(`Трек "${vf.title}" восстановлен.`); 
            const disabledTitlesRaw3 = localStorage.getItem('disabled') || '';
            const disabledTitles3 = disabledTitlesRaw3.split('\n').map(s => s.trim()).filter(s => s.length > 0);
            console.log(disabledTitles3); 
        });

        btnf.appendChild(restoreBtn);
      }

      btnf.addEventListener('click', () => {
        if (vf.url) {
          audioPlayer.src = vf.url;
          audioPlayer.play().catch(e => console.warn('Ошибка воспроизведения:', e));
        }
      });

      const deleteBtn22 = document.createElement('button');
      deleteBtn22.textContent = '-';
      deleteBtn22.className = 'delete-button12';
      deleteBtn22.setAttribute('aria-label', `Удалить ${albomMass.title}`);
      

      deleteBtn22.addEventListener('click', (event) => {
        event.stopPropagation(); 
        btnf.disabled = true;
        const btnfDisabled = btnf.textContent;
        const disabledTitlesRaw = localStorage.getItem('disabled') || '';
        const disabledTitles = disabledTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
        localStorage.setItem('disabled', btnfDisabled + '\n' + disabledTitles.join('\n'));
        console.log(`Трек "${btnfDisabled}" отключен.`); 



        const restoreBtn = document.createElement('button');
        restoreBtn.textContent = '+';
        restoreBtn.className = 'restore-button';
        restoreBtn.setAttribute('aria-label', `Восстановить ${vf.title}`);
        restoreBtn.disabled = false; 

        restoreBtn.addEventListener('click', () => {
          event.stopPropagation(); 
          const disabledTitlesRaw091 = localStorage.getItem('disabled') || '';
      const disabledTitles091 = disabledTitlesRaw091.split('\n').map(s => s.trim()).filter(s => s.length > 0);
            const updatedDisabledTitles1 = disabledTitles091.filter(title => title.toLowerCase() !== vf.title.toLowerCase()+"-");
            localStorage.setItem('disabled', updatedDisabledTitles1.join('\n'));
            btnf.disabled = false; 
            restoreBtn.remove(); 
            console.log(`Трек "${vf.title}" восстановлен.`); 
            const disabledTitlesRaw3 = localStorage.getItem('disabled') || '';
            const disabledTitles3 = disabledTitlesRaw3.split('\n').map(s => s.trim()).filter(s => s.length > 0);
            console.log(disabledTitles3); 
        });

        btnf.appendChild(restoreBtn);
        
        
      });
      btnf.appendChild(deleteBtn22);
      tracksContainer.appendChild(btnf);
   } 
);
  

    albumButton.addEventListener('click', () => {
      const isHidden = tracksContainer.style.maxHeight === '0px';
      tracksContainer.style.maxHeight = isHidden ? '600px' : '0px';
      tracksContainer.style.transition = 'max-height 0.3s ease';
      albumButton.setAttribute('aria-expanded', isHidden ? 'true' : 'false');
    });

    albumDiv.appendChild(albumButton);
    albumDiv.appendChild(tracksContainer);
    albomContainer.appendChild(albumDiv);
  });
}



























const searchInput = document.querySelector('.searchL input[type="text"]');
const searchForm = document.querySelector('.searchL');

searchForm.addEventListener('submit', (event) => {
  event.preventDefault(); 

  const query = searchInput.value.toLowerCase();

  const favoriteTitlesRaw = localStorage.getItem('trek') || '';
  const favoriteTitles = favoriteTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);

  const albomTitlesRaw = localStorage.getItem('trekA') || '';
  const albomTitles = albomTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);

  const albomToScrollTo = albomTitles.find(title => title.toLowerCase().includes(query));
  const trackToScrollTo = favoriteTitles.find(title => title.toLowerCase().includes(query));

  const ver = Array.from(favoritesContainer.children);
  const verA = Array.from(albomContainer.children);

  if (trackToScrollTo) {
    const Element = ver.find(child => child.textContent.includes(trackToScrollTo));
    if (Element) {
      Element.scrollIntoView({ behavior: 'smooth', block: 'center' });
      Element.classList.add('highlight');
      setTimeout(() => {
        Element.classList.remove('highlight');
      }, 2000);
    }
  }

  if (albomToScrollTo) {
    const ElementA = verA.find(child => child.querySelector('.title-text').textContent.includes(albomToScrollTo));
    if (ElementA) {
      ElementA.scrollIntoView({ behavior: 'smooth', block: 'center' });
      ElementA.classList.add('highlight');
      setTimeout(() => {
        ElementA.classList.remove('highlight');
      }, 2000);
    }
  } 
  else {
    let trackFound = false; 
    albomsT.forEach(titleTracks => {
      const filteredAlbomTitle = titleTracks.album;
      const FeAlbomTitle = filteredAlbomTitle.find(title12 => title12.title.toLowerCase().includes(query));

      if (FeAlbomTitle) {
        const albumElement = verA.find(child => child.querySelector(".title-text").textContent.includes(titleTracks.title));
        if (albumElement) {
          const TC = Array.from(albumElement.querySelectorAll(".tracks-container button"));
          const lement = TC.find(child => child.textContent.includes(FeAlbomTitle.title));
          const allAlbums = document.querySelectorAll('.tracks-container');
          allAlbums.forEach(container => {
            if (container !== albumElement.querySelector('.tracks-container')) {
              container.style.maxHeight = '0'; 
              container.parentElement.querySelector('.album-title').setAttribute('aria-expanded', 'false');
            }
          });
          albumElement.querySelector('.album-title').click();
          if (lement) { 
            albumElement.scrollIntoView({behavior: 'smooth', block: 'center'})
            setTimeout(() => {
              lement.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 500)

            setTimeout(() => {
              lement.classList.add('highlight');
              setTimeout(() => {
                lement.classList.remove('highlight');
                lement.classList.add('fade-out'); 
                setTimeout(() => {
                  lement.classList.remove('fade-out'); 
                }, 750);
              }, 3000);
            }, 300); 

            trackFound = true;
          }
        }
      }
    });
  }



});

  function NumbercreateTrackRow(track) {
      const row = document.createElement('div');
      row.className = 'track-row';
      const favoriteTitlesRaw = localStorage.getItem('trek') || '';

      const trackBtn = document.createElement('button');
      trackBtn.className = 'track-button';
      trackBtn.textContent = track.title;
      trackBtn.title = `Воспроизвести ${track.title}`;
      trackBtn.disabled = !track.url;
      trackBtn.onclick = () => {
        if (track.url) {
          audioPlayer.src = track.url;
          audioPlayer.play();
        }
      };

      const deleteBtn = document.createElement('button');
      deleteBtn.textContent = '-';
      deleteBtn.className = 'delete-button';
      deleteBtn.setAttribute('aria-label', `Удалить ${track.title}`);

      deleteBtn.addEventListener('click', (event) => {
        event.stopPropagation();
        const rawFilter = favoriteTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
        const updatedFavorites = rawFilter.filter(fav => fav !== track.title);
        localStorage.setItem('trek', updatedFavorites.join('\n'));
        console.log(`Трек "${track.title}" удален из избранного.`); 
        ABCUpdateFunction();
      });


      row.appendChild(deleteBtn);
      row.appendChild(trackBtn);

      return row;
    }












    function ANumbercreateTrackRow(track) {
      const AlbomTitlesRaw = localStorage.getItem('trekA') || '';
      

      const albumDiv = document.createElement('div');
    albumDiv.style.marginBottom = '16px';
    albumDiv.style.display = 'flex';
    albumDiv.style.flexDirection = 'column';

    const titleText = document.createElement('span');
    titleText.className = 'title-text';
    titleText.textContent = track.title;

    const albumButton = document.createElement('button');
    albumButton.className = 'album-title';
    albumButton.setAttribute('aria-expanded', 'false');
    albumButton.style.width = '100%';
    albumButton.style.textAlign = 'left';

    const deleteBtn212 = document.createElement('button');
    deleteBtn212.textContent = '-';
    deleteBtn212.className = 'delete-button';
    deleteBtn212.setAttribute('aria-label', `Удалить ${track.title}`);

    deleteBtn212.addEventListener('click', () => {
      const rawFilter = AlbomTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
      const updatedFavorites = rawFilter.filter(fav => fav !== track.title);
      localStorage.setItem('trekA', updatedFavorites.join('\n'));
      console.log(`Альбом "${track.title}" удален из избранного.`); 


      ABCUpdateFunction();
    });

    


    
    albumButton.appendChild(titleText);
    albumButton.appendChild(deleteBtn212)

     const tracksContainer = document.createElement('div');
    tracksContainer.className = 'tracks-container'; 
    tracksContainer.style.maxHeight = '0'; 
    tracksContainer.style.overflow = 'hidden';

    const der = track.album.sort((a, b) => a.title.localeCompare(b.title))

    der.forEach(albom => {
      const restoreBtn0 = document.createElement('button');
        restoreBtn0.className = 'restore-button0909';
        restoreBtn0.setAttribute('aria-label', `Восстановить ${albom.title}`);
        restoreBtn0.disabled = false; 

        restoreBtn0.addEventListener('click', (event) => {
          event.stopPropagation(); 
          const disabledTitlesRaw0911 = localStorage.getItem('disabled') || '';
      const disabledTitles0911 = disabledTitlesRaw0911.split('\n').map(s => s.trim()).filter(s => s.length > 0);
            const updatedDisabledTitles13 = disabledTitles0911.filter(title => title.toLowerCase() !== albom.title.toLowerCase()+"-");
            localStorage.setItem('disabled', updatedDisabledTitles13.join('\n'));
            btnf2.disabled = false;
            restoreBtn0.remove()
        });

        
      const btnf2 = document.createElement('button');
      btnf2.textContent = albom.title;
      btnf2.className = 'track-button';
      btnf2.title = `Воспроизвести ${albom.title}`;
      btnf2.setAttribute('aria-label', `Воспроизвести ${albom.title}`);
      btnf2.addEventListener('click', () => {
        if (albom.url) {
          audioPlayer.src = albom.url;
          audioPlayer.play().catch(e => console.warn('Ошибка воспроизведения:', e));
        }
      });
      const disabledTitlesRaw67 = localStorage.getItem('disabled') || '';
      const disabledTitles67 = disabledTitlesRaw67.split('\n').map(s => s.trim()).filter(s => s.length > 0);
      console.log(disabledTitles67)
      if (disabledTitles67.map(title => title.toLowerCase()).includes(albom.title.toLowerCase()+"-")) {
        btnf2.disabled = true;
        console.log("Сработало")
        btnf2.appendChild(restoreBtn0)
      }

      

      

      const deleteBtn221 = document.createElement('button');
      deleteBtn221.textContent = '-';
      deleteBtn221.className = 'delete-button12';
      deleteBtn221.setAttribute('aria-label', `Удалить ${albom.title}`);

      deleteBtn221.addEventListener('click', (event) => {
        event.stopPropagation(); 
        btnf2.disabled = true;
        const btnfDisabled = btnf2.textContent;
        const disabledTitlesRaw = localStorage.getItem('disabled') || '';
        const disabledTitles = disabledTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
        localStorage.setItem('disabled', btnfDisabled + '\n' + disabledTitles.join('\n'));
        console.log(`Трек "${btnfDisabled}" отключен.`); 
        btnf2.appendChild(restoreBtn0)


  

      });

     
      btnf2.appendChild(deleteBtn221)

      tracksContainer.appendChild(btnf2)
    })

 

    albumButton.addEventListener('click', () => {
      const isHidden = tracksContainer.style.maxHeight === '0px';
      tracksContainer.style.maxHeight = isHidden ? '1000px' : '0px';
      tracksContainer.style.transition = 'max-height 0.3s ease';
      albumButton.setAttribute('aria-expanded', isHidden ? 'true' : 'false');
    });

    console.log(albumButton)


    

    
    albumDiv.append(albumButton)
    albumDiv.appendChild(tracksContainer)


    console.log(track.title)

      return albumDiv;
    }




    function DateNumbercreateTrackRow(track) {
      const row = document.createElement('div');
      row.className = 'track-row';

      monthDay = {
        '01': 'янв',
        '02': 'фев',
        '03': 'мар',
        '04': 'апр',
        '05': 'май',
        '06': 'июн',
        '07': 'июл',
        '08': 'авг',
        '09': 'сен',
        '10': 'окт',
        '11': 'нояб',
        '12': 'дек',


      }

      const trackBtn = document.createElement('button');
      trackBtn.className = 'track-button';
      trackBtn.textContent = track.title;
      trackBtn.title = `Воспроизвести ${track.title}`;
      trackBtn.disabled = !track.url;
      trackBtn.onclick = () => {
        if (track.url) {
          audioPlayer.src = track.url;
          audioPlayer.play();
        }
      };
      const deleteBtn56 = document.createElement('button');
      deleteBtn56.textContent = '-';
      deleteBtn56.className = 'delete-button';
      deleteBtn56.setAttribute('aria-label', `Удалить ${track.title}`);

      deleteBtn56.addEventListener('click', (event) => {
        event.stopPropagation();
        const favoriteTitlesRawUpdate = localStorage.getItem('trek') || '';
        const rawFilterDate = favoriteTitlesRawUpdate.split('\n').map(s => s.trim()).filter(s => s.length > 0);
        const updatedFavorites = rawFilterDate.filter(fav => fav !== track.title);
        localStorage.setItem('trek', updatedFavorites.join('\n'));
        console.log(`Трек "${track.title}" удален из избранного.`); 
        DateUpdateFunction();
      });


      


      const numBtnDate = document.createElement('button');
      numBtnDate.className = 'num-btn-date';
      const trackDate = track.date.substring(3, 5)
      numBtnDate.textContent = track.date.substring(0, 2) + ' ' + monthDay[trackDate] + "\n" + track.date.substring(6, 10);
      row.appendChild(numBtnDate);
      row.appendChild(deleteBtn56);
      row.appendChild(trackBtn);

      return row;
    }







  document.getElementById('sort-button').addEventListener('click', (event) => {
   event.preventDefault();  
   favoritesContainer.innerHTML = '';
   const favoriteTitlesRaw = localStorage.getItem('trek') || '';
   const favoriteTitles = favoriteTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);

   favoriteTitles.sort((a, b) => a.localeCompare(b));
   console.log(favoriteTitles)

   favoriteTitles.forEach((trackSort) => {
     console.log(trackSort)
       const track = tracks.find(t => t.title === trackSort);
       console.log(track)
       const clearTrackRowToSort = NumbercreateTrackRow(track);
       favoritesContainer.appendChild(clearTrackRowToSort);
   });

   albomContainer.innerHTML = '';

   const albomTitlesRaw = localStorage.getItem('trekA') || '';
   const AlbomTitles = albomTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);

   AlbomTitles.sort((a, b) => a.localeCompare(b));
   console.log(AlbomTitles)

   AlbomTitles.forEach(AlbomSort => {
       console.log(AlbomSort)
       const AlbomTrack = albomsT.find(t => t.title === AlbomSort);
       console.log(AlbomTrack)
       const AclearTrackRowToSort = ANumbercreateTrackRow(AlbomTrack);
       console.log(AclearTrackRowToSort)
       albomContainer.appendChild(AclearTrackRowToSort);
   });

});


document.getElementById('sort-button-data').addEventListener('click', (event) => {
   event.preventDefault();
   favoritesContainer.innerHTML = '';

   const filteredUpdatedFavorites = [];
   const aTitlesRaw = localStorage.getItem('trek') || '';
   const ATitles = aTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
   ATitles.forEach(trackBear => {
      const foundTrack = tracks.find(t => t.title === trackBear);
      if (foundTrack) {
          filteredUpdatedFavorites.push(foundTrack);
      }
   });

   console.log(filteredUpdatedFavorites)

   filteredUpdatedFavorites.sort((a, b) => new Date(b.date) - new Date(a.date));

   filteredUpdatedFavorites.forEach(favoritesTrek => {
      console.log(favoritesTrek)
      veu = DateNumbercreateTrackRow(favoritesTrek)
      favoritesContainer.appendChild(veu)

   })
});

UpdateFunction();

  </script>
</body>




