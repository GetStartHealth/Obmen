            }
        });

        const disabledTitlesRaw67 = localStorage.getItem('disabled') || '';
        const disabledTitles67 = disabledTitlesRaw67.split('\n').map(s => s.trim()).filter(s => s.length > 0);
        if (disabledTitles67.map(title => title.toLowerCase()).includes(albom.title.toLowerCase())) {
            btnf2.disabled = true;
            btnf2.appendChild(restoreBtn0);
        }

        const deleteBtn221 = document.createElement('button');
        deleteBtn221.textContent = '-';
        deleteBtn221.className = 'delete-button';
        deleteBtn221.setAttribute('aria-label', `Удалить ${albom.title}`);

        deleteBtn221.addEventListener('click', (event) => {
            event.stopPropagation(); 
            btnf2.disabled = true;
            const btnfDisabled = btnf2.textContent;
            const disabledTitlesRaw = localStorage.getItem('disabled') || '';
            const disabledTitles = disabledTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
            localStorage.setItem('disabled', btnfDisabled + '\n' + disabledTitles.join('\n'));
            console.log(`Трек "${btnfDisabled}" отключен.`); 
            buttonContainer.appendChild(restoreBtn0);
        });

        buttonContainer.appendChild(deleteBtn221);
        trackContainer.appendChild(btnf2);
        trackContainer.appendChild(buttonContainer);
        tracksContainer.appendChild(trackContainer);
    });

    albumButton.addEventListener('click', () => {
        const isHidden = tracksContainer.style.maxHeight === '0px';
        tracksContainer.style.maxHeight = isHidden ? '1000px' : '0px';
        tracksContainer.style.transition = 'max-height 0.3s ease';
        albumButton.setAttribute('aria-expanded', isHidden ? 'true' : 'false');
    });

    albumDiv.append(albumButton);
    albumDiv.appendChild(tracksContainer);

    return albumDiv;
}











        







  document.getElementById('sort-button').addEventListener('click', (event) => {
   event.preventDefault();  
   favoritesContainer.innerHTML = '';
   const favoriteTitlesRaw = localStorage.getItem('trek') || '';
   const favoriteTitles = favoriteTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);

   favoriteTitles.sort((a, b) => a.localeCompare(b));
   console.log(favoriteTitles)

   favoriteTitles.forEach((trackSort) => {
     console.log(trackSort)
       const track = tracks.find(t => t.title === trackSort);
       console.log(track)
       const clearTrackRowToSort = NumbercreateTrackRow(track);
       favoritesContainer.appendChild(clearTrackRowToSort);
   });

   albomContainer.innerHTML = '';

   const albomTitlesRaw = localStorage.getItem('trekA') || '';
   const AlbomTitles = albomTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);

   AlbomTitles.sort((a, b) => a.localeCompare(b));
   console.log(AlbomTitles)

   AlbomTitles.forEach(AlbomSort => {
       console.log(AlbomSort)
       const AlbomTrack = albomsT.find(t => t.title === AlbomSort);
       console.log(AlbomTrack)
       const AclearTrackRowToSort = ANumbercreateTrackRow(AlbomTrack);
       console.log(AclearTrackRowToSort)
       albomContainer.appendChild(AclearTrackRowToSort);
   });





  })


    function DateNumbercreateTrackRow(track) {
      const row = document.createElement('div');
      row.className = 'track-row';

      const albomTitlesRaw = localStorage.getItem('trekA') || '';
   const AlbomTitles = albomTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);

   

      monthDay = {
        '01': 'янв',
        '02': 'фев',
        '03': 'мар',
        '04': 'апр',
        '05': 'май',
        '06': 'июн',
        '07': 'июл',
        '08': 'авг',
        '09': 'сен',
        '10': 'окт',
        '11': 'нояб',
        '12': 'дек',


      }

      const trackBtn = document.createElement('button');
      trackBtn.className = 'track-button';
      trackBtn.textContent = track.title;
      trackBtn.title = `Воспроизвести ${track.title}`;
      trackBtn.disabled = !track.url;
      trackBtn.onclick = () => {
        if (track.url) {
          audioPlayer.src = track.url;
          audioPlayer.play();
        }
      };
      const deleteBtn56 = document.createElement('button');
      deleteBtn56.textContent = '-';
      deleteBtn56.className = 'delete-button';
      deleteBtn56.setAttribute('aria-label', `Удалить ${track.title}`);

      deleteBtn56.addEventListener('click', (event) => {
        event.stopPropagation();
        const favoriteTitlesRawUpdate = localStorage.getItem('trek') || '';
        const rawFilterDate = favoriteTitlesRawUpdate.split('\n').map(s => s.trim()).filter(s => s.length > 0);
        const updatedFavorites = rawFilterDate.filter(fav => fav !== track.title);
        localStorage.setItem('trek', updatedFavorites.join('\n'));
        console.log(`Трек "${track.title}" удален из избранного.`); 
        DateUpdateFunction();
      });


      


      const numBtnDate = document.createElement('button');
      numBtnDate.className = 'num-btn-date';
      const trackDate = track.date.substring(3, 5)
      numBtnDate.textContent = track.date.substring(0, 2) + ' ' + monthDay[trackDate] + "\n" + track.date.substring(6, 10);
      row.appendChild(numBtnDate);
      row.appendChild(deleteBtn56);
      row.appendChild(trackBtn);

      return row;
 
    }




    function DateAlbom(track) {


      const albomTitlesRaw = localStorage.getItem('trekA') || '';
   const AlbomTitles = albomTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);


  

  console.log('стоп')



   

      monthDay = {
        '01': 'янв',
        '02': 'фев',
        '03': 'мар',
        '04': 'апр',
        '05': 'май',
        '06': 'июн',
        '07': 'июл',
        '08': 'авг',
        '09': 'сен',
        '10': 'окт',
        '11': 'нояб',
        '12': 'дек',


      }

       const albumDiv = document.createElement('div');
    albumDiv.style.marginBottom = '16px';
    albumDiv.style.display = 'flex';
    albumDiv.style.flexDirection = 'column';


      const titleText = document.createElement('span');
    titleText.className = 'title-text';
    titleText.textContent = track.title;

    const albomRowDate = document.createElement('div');
    albomRowDate.style.display = 'flex';
    albomRowDate.style.gap = '16px';

    const albumButton = document.createElement('button');
    albumButton.className = 'album-title';
    albumButton.setAttribute('aria-expanded', 'false');
    albumButton.style.width = '100%';
    albumButton.style.textAlign = 'left';

    const numBtnDate23 = document.createElement('button');
      numBtnDate23.className = 'num-btn-date';
      const trackDate = track.titleDate.substring(3, 5)
      numBtnDate23.textContent = track.titleDate.substring(0, 2) + ' ' + monthDay[trackDate] + "\n" + track.titleDate.substring(6, 10);



    const tracksContainer = document.createElement('div');
    tracksContainer.className = 'tracks-container'; 
    tracksContainer.style.maxHeight = '0'; 
    tracksContainer.style.overflow = 'hidden';

    track.album.sort((a, b) => new Date(b.titleDate) - new Date(a.titleDate));

    track.album.forEach(albom => {
      const albomRow = document.createElement('div');
    albomRow.style.display = 'flex';
    albomRow.style.gap = '16px';

    

      const numBtnDate = document.createElement('button');
      numBtnDate.className = 'num-btn-date';
      console.log(albom)
      const trackDate = albom.titleDate.substring(3, 5)
      numBtnDate.textContent = albom.titleDate.substring(0, 2) + ' ' + monthDay[trackDate] + "\n" + albom.titleDate.substring(6, 10);







      

      const btnf290 = document.createElement('button');
      btnf290.textContent = albom.title;
      btnf290.className = 'track-button';
      btnf290.title = `Воспроизвести ${albom.title}`;
      btnf290.setAttribute('aria-label', `Воспроизвести ${albom.title}`);
      btnf290.addEventListener('click', () => {
        if (albom.url) {
          audioPlayer.src = albom.url;
          audioPlayer.play().catch(e => console.warn('Ошибка воспроизведения:', e));
        }
      });

      const restoreBtn0 = document.createElement('button');
        restoreBtn0.className = 'restore-button0909';
        restoreBtn0.setAttribute('aria-label', `Восстановить ${albom.title}`);
        restoreBtn0.disabled = false; 

        restoreBtn0.addEventListener('click', (event) => {
          event.stopPropagation(); 
          const disabledTitlesRaw0911 = localStorage.getItem('disabled') || '';
      const disabledTitles0911 = disabledTitlesRaw0911.split('\n').map(s => s.trim()).filter(s => s.length > 0);
            const updatedDisabledTitles13 = disabledTitles0911.filter(title => title.toLowerCase() !== albom.title.toLowerCase()+"-");
            localStorage.setItem('disabled', updatedDisabledTitles13.join('\n'));
            btnf290.disabled = false;
            restoreBtn0.remove()
        })

        const disabledTitlesRaw67 = localStorage.getItem('disabled') || '';
      const disabledTitles67 = disabledTitlesRaw67.split('\n').map(s => s.trim()).filter(s => s.length > 0);
      console.log(disabledTitles67)
      if (disabledTitles67.map(title => title.toLowerCase()).includes(albom.title.toLowerCase()+"-")) {
        btnf290.disabled = true;
        console.log("Сработало")
        btnf290.appendChild(restoreBtn0)
      }

      const deleteBtn2210 = document.createElement('button');
      deleteBtn2210.textContent = '-';
      deleteBtn2210.className = 'delete-button217';
      deleteBtn2210.setAttribute('aria-label', `Удалить ${albom.title}`);

      deleteBtn2210.addEventListener('click', (event) => {
        event.stopPropagation(); 
        btnf290.disabled = true;
        const btnfDisabled = btnf290.textContent;
        const disabledTitlesRaw = localStorage.getItem('disabled') || '';
        const disabledTitles = disabledTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
        localStorage.setItem('disabled', btnfDisabled + "-" + '\n' + disabledTitles.join('\n'));
        console.log(`Трек "${btnfDisabled}" отключен.`); 
        albomRow.appendChild(restoreBtn0)


      });
      
      albomRow.appendChild(numBtnDate);
      albomRow.appendChild(deleteBtn2210)
      albomRow.appendChild(btnf290)
     
      tracksContainer.appendChild(albomRow)
      
    })
        albomRowDate.appendChild(numBtnDate23)
    albomRowDate.appendChild(titleText)
    albumButton.appendChild(albomRowDate)

    albumButton.addEventListener('click', () => {
      const isHidden = tracksContainer.style.maxHeight === '0px';
      tracksContainer.style.maxHeight = isHidden ? '1000px' : '0px';
      tracksContainer.style.transition = 'max-height 0.3s ease';
      albumButton.setAttribute('aria-expanded', isHidden ? 'true' : 'false');
    });
  
      
      


      albumDiv.appendChild(albumButton)
      albumDiv.appendChild(tracksContainer)

      return albumDiv
    }



  document.getElementById('sort-button').addEventListener('click', (event) => {
   event.preventDefault();  
   favoritesContainer.innerHTML = '';
   const favoriteTitlesRaw = localStorage.getItem('trek') || '';
   const favoriteTitles = favoriteTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);

   favoriteTitles.sort((a, b) => a.localeCompare(b));
   console.log(favoriteTitles)

   favoriteTitles.forEach((trackSort) => {
     console.log(trackSort)
       const track = tracks.find(t => t.title === trackSort);
       console.log(track)
       const clearTrackRowToSort = NumbercreateTrackRow(track);
       favoritesContainer.appendChild(clearTrackRowToSort);
   });

   albomContainer.innerHTML = '';

   const albomTitlesRaw = localStorage.getItem('trekA') || '';
   const AlbomTitles = albomTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);

   AlbomTitles.sort((a, b) => a.localeCompare(b));
   console.log(AlbomTitles)

   AlbomTitles.forEach(AlbomSort => {
       console.log(AlbomSort)
       const AlbomTrack = albomsT.find(t => t.title === AlbomSort);
       console.log(AlbomTrack)
       const AclearTrackRowToSort = ANumbercreateTrackRow(AlbomTrack);
       console.log(AclearTrackRowToSort)
       albomContainer.appendChild(AclearTrackRowToSort);
   });

});


document.getElementById('sort-button-data').addEventListener('click', (event) => {
   event.preventDefault();
   favoritesContainer.innerHTML = '';
   albomContainer.innerHTML = '';

   const filteredUpdatedFavorites = [];
   const aTitlesRaw = localStorage.getItem('trek') || '';
   const ATitles = aTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);
   ATitles.forEach(trackBear => {
      const foundTrack = tracks.find(t => t.title === trackBear);
      if (foundTrack) {
          filteredUpdatedFavorites.push(foundTrack);
      }
   });

   console.log(filteredUpdatedFavorites)

   filteredUpdatedFavorites.sort((a, b) => new Date(b.date) - new Date(a.date));

   filteredUpdatedFavorites.forEach(favoritesTrek => {
      console.log(favoritesTrek)
      veu = DateNumbercreateTrackRow(favoritesTrek)
      favoritesContainer.appendChild(veu)

   })

   albomContainer.innerHTML = '';

   const AlbomfilteredUpdatedFavorites = [];
   const AlbomTitlesRaw = localStorage.getItem('trekA') || '';
   const AlbomTitles = AlbomTitlesRaw.split('\n').map(s => s.trim()).filter(s => s.length > 0);

   AlbomTitles.forEach(trackBearA => {
      const foundAlbom = albomsT.find(t => t.title === trackBearA);
      if (foundAlbom) {
          AlbomfilteredUpdatedFavorites.push(foundAlbom);
      }
   });

   AlbomfilteredUpdatedFavorites.sort((a, b) => new Date(b.titleDate) - new Date(a.titleDate));

   AlbomfilteredUpdatedFavorites.forEach(filteredAlbom => {
    tea = DateAlbom(filteredAlbom)
    albomContainer.appendChild(tea)
   })

});

UpdateFunction();

  </script>
</body>
